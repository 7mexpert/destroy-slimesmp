<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Online Players - SlimeSMP</title>
  <style>
    body { font-family: Arial; background: #111; color: #fff; text-align: center; padding: 20px; }
    .player { margin: 10px auto; padding: 10px; width: 300px; background: #222; border-radius: 8px; }
    .online { color: #0f0; }
    .offline { color: #f00; }
  </style>
</head>
<body>
  <h1>Online Players - SlimeSMP</h1>
  <div id="players"></div>

  <script>
    const usernames = ["Blood09", "Player2", "Player3"]; // <-- Add all usernames here
    const container = document.getElementById('players');

    async function checkStatus(username) {
      try {
        const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(`http://slimesmp2025.my.pebble.host:8124/player/${username}`)}`);
        const data = await res.json();
        const online = data.contents.includes('Online') && !data.contents.includes('Offline');
        return { username, status: online ? 'online' : 'offline' };
      } catch {
        return { username, status: 'error' };
      }
    }

    async function updatePlayers() {
      container.innerHTML = 'Loading...';
      const results = await Promise.all(usernames.map(checkStatus));
      container.innerHTML = '';
      results.forEach(({ username, status }) => {
        const div = document.createElement('div');
        div.className = 'player';
        div.innerHTML = `<strong>${username}</strong>: <span class="${status}">${status.toUpperCase()}</span>`;
        container.appendChild(div);
      });
    }

    updatePlayers();
    setInterval(updatePlayers, 30000); // auto refresh every 30 sec
  </script>
</body>
</html>
